<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php 
			//session_start(); 
			session_destroy();
			session_unset();			
			//session_start(); 
		?>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="images/favicon.png">
        <link rel="stylesheet" type="text/css" href="css/navigationBar.css">
        <link rel="stylesheet" type="text/css" href="css/tile.css">
        <script language="javascript" type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
        <title>PI Status</title>
		 
        <script>
            function collapseNavBar() {
                var x = document.getElementById("myTopnav");
                if (x.className === "topnav") {
                    x.className += " responsive";
                } else {
                    x.className = "topnav";
                }
            }

            $(function () {
                function updateTiles () {
                    // Disk Usage tile
                    $.get( "./proxy/diskUsage.php").done(function (output) {
                        document.getElementById('tileID1').childNodes[0].innerHTML  = "<pre>" + "Disk\n" + output + "</pre>";
                    });

                    // Ram free
                    $.get( "./proxy/ramUsage.php").done(function (output) {
                        document.getElementById('tileID2').childNodes[0].innerHTML  = "<pre>" + "Free Ram\n" + output + "</pre>";
                    });

                    // Average Load
                    $.get( "./proxy/averageLoad.php").done(function (output) {
                        document.getElementById('tileID3').childNodes[0].innerHTML  = "<pre>" + "Average Load\n" + output + "</pre>";
                    });

                    // CPU Usage
                    $.get( "./proxy/cpuUsage.php").done(function (output) {
                        document.getElementById('tileID4').childNodes[0].innerHTML  = "<pre>" + "CPU\n" + output + "</pre>";
                    });

					// Network Usage
					$.get( "./proxy/networkUsage.php", {networkInterface: "wlan0", intervalSec: 3}).done(function (output) {
                        document.getElementById('tileID5').childNodes[0].innerHTML  = "<pre>" + "Wifi\n" + output + "</pre>";
                    });
					
					// Uptime
					$.get( "./proxy/uptime.php").done(function (output) {
                        document.getElementById('tileID6').childNodes[0].innerHTML  = "<pre>" + "Uptime\n" + output + "</pre>";
                    });	
					
					// Users
					$.get( "./proxy/users.php").done(function (output) {
                        document.getElementById('tileID7').childNodes[0].innerHTML  = "<pre>" + "Users\n" + output + "</pre>";
                    });							
                }

                updateTiles();
                setInterval( updateTiles, 3000 );
            });
        </script>       
    </head>
    <body>
    <div class="topnav" id="myTopnav">
      <a href="#"><img src="images/raspberryPi.png" style="width:22px; height:21px" title="PI Status" alt="raspberryPi"></a>
      <a href="" style="float: right;">Refresh</a>
      <a href="javascript:void(0);" style="font-size:15px;" class="icon" onclick="collapseNavBar()">&#9776;</a>
    </div>
    <div class='tileContainer'>
        <div id="tileID1" class='tile tile1'><div class='tileicon disk info'></div></div>
        <div id="tileID2" class='tile tile2'><div class='tileicon ram info'></div></div>
        <div id="tileID3" class='tile tile3'><div class='tileicon load info'></div></div>
        <div id="tileID4" class='tile tile4'><div class='tileicon cpu info'></div></div>
        <div id="tileID5" class='tile tile5'><div class='tileicon wifi info'></div></div>
        <div id="tileID6" class='tile tile6'><div class='tileicon uptime info'></div></div>
		<div id="tileID7" class='tile tile7'><div class='tileicon users info'></div></div>
    </div>
    </body>
</html>
